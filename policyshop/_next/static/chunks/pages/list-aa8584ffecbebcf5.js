(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{2848:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list",function(){return l(4174)}])},993:function(e,t,l){"use strict";var r=l(2322),c=l(5817);let n=e=>{let{styles:t}=e;return(0,r.jsxs)("div",{className:"text-center typo-b6 mb-9 ".concat(t),children:[(0,r.jsx)("p",{children:"ส่งข้อมูลให้ทีมงานเพื่ออัปเดตเพิ่มเติมที่อีเมล"}),(0,r.jsxs)("div",{className:"flex mx-auto items-center w-fit space-x-[16px] mt-1",children:[(0,r.jsx)("p",{className:"font-bold ",children:"team@punchup.world"}),(0,r.jsxs)("button",{className:" bg-gray-2 flex items-center rounded-[20px] px-2 py-1",onClick:()=>{navigator.clipboard.writeText("team@punchup.world")},children:[(0,r.jsx)("img",{src:"".concat(c.E,"/clipboard.svg"),alt:"child",className:"mr-1 "}),(0,r.jsx)("p",{className:"typo-b7",children:"ก็อปปี้"})]})]})]})};t.Z=n},1018:function(e,t,l){"use strict";var r=l(2322),c=l(5817),n=l(2784);let o=e=>{let t,{options:l,currentOption:o,onSelect:i,placeholder:a,disabled:s}=e,u=(0,n.useRef)(null),[d,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&p(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[u]);let x=e=>{s||(i(e),p(!1))};return(0,r.jsxs)("div",{className:"relative w-full",ref:u,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between hover:".concat(s?"cursor-unset":"cursor-pointer"," ").concat("px-[16px] py-[10px] bg-[var(--color-white)] border-[3px] rounded-[50px]"),onClick:()=>{s||p(!d)},style:{borderColor:(t="var(--color-black)",s&&(t="var(--color-gray-2)"),d&&(t="var(--color-highlight-2)"),t)},children:[(0,r.jsx)("span",{className:s?"text-[var(--color-gray-2)]":null!==o?"text-[var(--color-black)]":"text-[var(--color-gray-3)]",children:o?o.label:a||"เลือกตัวเลือก"}),(0,r.jsx)("img",{className:"".concat(s&&"[filter:invert(88%) sepia(9%) saturate(416%) hue-rotate(17deg) brightness(83%) contrast(87%)]"),src:"".concat(c.E,"/Chevron.svg"),alt:"dropdown-arrow",style:{transform:"".concat(d?"rotate(180deg)":"none"),filter:"".concat(s?"invert(88%) sepia(9%) saturate(416%) hue-rotate(17deg) brightness(83%) contrast(87%)":"unset")}})]}),d&&(0,r.jsx)("div",{className:"absolute w-full max-h-[300px] overflow-y-auto z-50 mt-[12px] p-[15px] bg-[var(--color-highlight-1)] border-[3px] border-[var(--color-black)]",children:l.map((e,t)=>(0,r.jsxs)("div",{className:"hover:cursor-pointer hover:bg-[var(--color-highlight-2)] rounded-[10px]",children:[(0,r.jsx)("div",{className:"p-[5px]",onClick:()=>x(e),children:e.label},"option-".concat(t)),t!==l.length-1&&(0,r.jsx)("hr",{className:"border-t-[1px] border-[var(--color-highlight-2)] w-[98%] mx-auto"})]},"option-".concat(t)))})]})};t.Z=o},8467:function(e,t,l){"use strict";var r=l(2322),c=l(5817),n=l(7162);let o=()=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 px-4  font-bold typo-b5 bg-highlight-3 mb-8 mt-2 rounded-[10px]",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("img",{src:"".concat(c.E,"/child.svg"),alt:"child",className:"mr-2 "}),(0,r.jsx)("p",{children:"เส้นทางการผลักดันนโยบาย"})]}),(0,r.jsx)("button",{className:"underline ",onClick:()=>(0,n.rV)(),children:"อ่านต่อ"})]});t.Z=o},4174:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSG:function(){return m}});var r=l(2322),c=l(1018),n=l(8467),o=l(993),i=l(2176),a=l(1365),s=l(7162),u=l(2784),d=l(425),p=l(5632),x=l(1092);let h=e=>{let{policies:t,parties:l}=e,h=l.reduce((e,t)=>{let l=e.find(e=>t.Name===e);return l?e:[...e,t.Name]},[]),m=t.reduce((e,t)=>{let l=e.find(e=>t.Topic===e);return l?e:[...e,t.Topic]},[]),v=(0,p.useRouter)(),[f,g]=(0,u.useState)(t),[b,j]=(0,u.useState)([]),[N,y]=(0,u.useState)([]),[w,_]=(0,u.useState)(null),[E,S]=(0,u.useState)(null),{hot:k,topic:T,party:Z}=v.query,C=()=>{g(e=>[...(0,s.Uy)(e)])},L=e=>{v.push("/list"+(e?"?".concat(e):""),void 0,{shallow:!0})},O=t.reduce((e,t)=>{let l=e.findIndex(e=>e.topic===t.Topic);return -1===l?e=[...e,{topic:t.Topic,policies:[t]}]:e[l]={topic:t.Topic,policies:[...e[l].policies,t]},e},[]),P=()=>{let e=O.map(e=>{let t="".concat(e.topic," (").concat(e.policies.length,")");return{label:t,value:e.topic}}),l={label:"นโยบายทั้งหมด (".concat(t.length,")"),value:"นโยบายทั้งหมด"};e=e.sort((e,t)=>e.label<t.label?-1:1),e=[l,...e],k&&(e=e.filter(e=>x.dz.includes(e.value||"")));let r=e.find(e=>e.value===T);T&&r?S(r):S(l),y(e)},z=()=>{let e=l.map(e=>{let l=t.filter(t=>{let l=t.Party.Name===e.Name,r=!0;return T&&(r=t.Topic===T),l&&r}),r="".concat(e.Name," (").concat(l.length,")");return{label:r,value:e.Name}}),r=O.find(e=>e.topic===T),c=r?r.policies.length:t.length,n={label:"ดูของทุกพรรค (".concat(c,")"),value:"ดูของทุกพรรค"};e=e.sort((e,t)=>e.label<t.label?-1:1),j(e=[n,...e]);let o=e.find(e=>e.value===Z);Z&&o?_(o):_(n)},R=()=>{P(),z()},X=()=>{let e=t,l=b.find(e=>e.value===Z);(null==Z?void 0:Z.toString())&&l&&(e=e.filter(e=>e.Party.Name===Z));let r=N.find(e=>e.value===T);(null==T?void 0:T.toString())&&r&&(e=e.filter(e=>e.Topic===(null==T?void 0:T.toString()))),(null==k?void 0:k.toString())&&(e=e.filter(e=>x.dz.includes(e.Topic))),g(e)},q=(e,t,l)=>{let r="";return m.find(e=>e===t)&&(r+="topic=".concat(t,"&")),h.find(t=>t===e)&&(r+="party=".concat(e,"&")),l&&(r+="hot=true&"),r};return(0,u.useEffect)(()=>{},[]),(0,u.useEffect)(()=>{R()},[T,Z]),(0,u.useEffect)(()=>{X();let e=q((null==w?void 0:w.value)||"",(null==E?void 0:E.value)||"",!!k);L(e)},[w,E]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("main",{children:(0,r.jsxs)(d.Z,{title:k?"นโยบายประเด็นร้อน":"นโยบายตามประเด็น",children:[(0,r.jsx)(n.Z,{}),(0,r.jsx)(o.Z,{}),E&&w&&(0,r.jsxs)(a.Z,{policyList:f,partyList:l,children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-[16px]",children:[(0,r.jsx)(c.Z,{options:N,currentOption:E,onSelect:S}),(0,r.jsx)(c.Z,{options:b,currentOption:w,onSelect:_})]}),(0,r.jsx)("div",{className:"flex justify-end items-center mt-[32px] mb-[20px]",children:(0,r.jsx)(i.Z,{onClick:C})})]})]})})})};var m=!0;t.default=(0,u.memo)(h)}},function(e){e.O(0,[938,964,54,811,425,707,774,888,179],function(){return e(e.s=2848)}),_N_E=e.O()}]);