(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{2848:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list",function(){return l(4174)}])},4174:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSG:function(){return h}});var i=l(2322),n=l(1018),c=l(8467),o=l(993),u=l(2176),r=l(6555),a=l(3429),s=l(2784),d=l(425),p=l(5632),f=l(1092);let v=e=>{let{policies:t,parties:l}=e,v=l.reduce((e,t)=>{let l=e.find(e=>t.Name===e);return l?e:[...e,t.Name]},[]),h=t.reduce((e,t)=>{let l=e.find(e=>t.Topic===e);return l?e:[...e,t.Topic]},[]),m=(0,p.useRouter)(),[x,N]=(0,s.useState)(t),[_,S]=(0,s.useState)([]),[j,g]=(0,s.useState)([]),[b,T]=(0,s.useState)(null),[y,w]=(0,s.useState)(null),{hot:E,topic:Z,party:k}=m.query,O=()=>{N(e=>[...(0,a.Uy)(e)])},P=e=>{m.push("/list"+(e?"?".concat(e):""),void 0,{shallow:!0})},C=t.reduce((e,t)=>{let l=e.findIndex(e=>e.topic===t.Topic);return -1===l?e=[...e,{topic:t.Topic,policies:[t]}]:e[l]={topic:t.Topic,policies:[...e[l].policies,t]},e},[]),z=()=>{let e=C.map(e=>{let t="".concat(e.topic," (").concat(e.policies.length,")");return{label:t,value:e.topic}}),l={label:"นโยบายทั้งหมด (".concat(t.length,")"),value:"นโยบายทั้งหมด"};e=(e=[...e,l]).sort((e,t)=>e.label<t.label?-1:1),E&&(e=e.filter(e=>f.dz.includes(e.value||"")));let i=e.find(e=>e.value===Z);Z&&i?w(i):w(l),g(e)},L=()=>{let e=l.map(e=>{let l=t.filter(t=>{let l=t.Party.Name===e.Name,i=!0;return Z&&(i=t.Topic===Z),l&&i}),i="".concat(e.Name," (").concat(l.length,")");return{label:i,value:e.Name}}),i=C.find(e=>e.topic===Z),n=i?i.policies.length:t.length,c={label:"ดูของทุกพรรค (".concat(n,")"),value:"ดูของทุกพรรค"};S(e=(e=[...e,c]).sort((e,t)=>e.label<t.label?-1:1));let o=e.find(e=>e.value===k);k&&o?T(o):T(c)},X=()=>{z(),L()},q=()=>{let e=t,l=_.find(e=>e.value===k);(null==k?void 0:k.toString())&&l&&(e=e.filter(e=>e.Party.Name===k));let i=j.find(e=>e.value===Z);(null==Z?void 0:Z.toString())&&i&&(e=e.filter(e=>e.Topic===(null==Z?void 0:Z.toString()))),(null==E?void 0:E.toString())&&(e=e.filter(e=>f.dz.includes(e.Topic))),N(e)},F=(e,t,l)=>{let i="";return h.find(e=>e===t)&&(i+="topic=".concat(t,"&")),v.find(t=>t===e)&&(i+="party=".concat(e,"&")),l&&(i+="hot=true&"),i};return(0,s.useEffect)(()=>{},[]),(0,s.useEffect)(()=>{X()},[Z,k]),(0,s.useEffect)(()=>{q();let e=F((null==b?void 0:b.value)||"",(null==y?void 0:y.value)||"",!!E);P(e)},[b,y]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("main",{children:(0,i.jsxs)(d.Z,{title:E?"นโยบายประเด็นร้อน":"นโยบายตามประเด็น",children:[(0,i.jsx)(c.Z,{}),(0,i.jsx)(o.Z,{}),y&&b&&(0,i.jsxs)(r.Z,{policyList:x,partyList:l,children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-[16px]",children:[(0,i.jsx)(n.Z,{options:j,currentOption:y,onSelect:w}),(0,i.jsx)(n.Z,{options:_,currentOption:b,onSelect:T})]}),(0,i.jsx)("div",{className:"flex justify-end items-center mt-[32px]",children:(0,i.jsx)(u.Z,{onClick:O})})]})]})})})};var h=!0;t.default=(0,s.memo)(v)}},function(e){e.O(0,[964,54,425,586,774,888,179],function(){return e(e.s=2848)}),_N_E=e.O()}]);