(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{7833:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list",function(){return l(4750)}])},4750:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSG:function(){return v}});var n=l(2322),i=l(5328),c=l(9821),o=l(8117),u=l(4383),r=l(1693),a=l(7147),s=l(2784),p=l(1415),f=l(1163);let d=e=>{let{policies:t,parties:l}=e,d=l.reduce((e,t)=>{let l=e.find(e=>t.Name===e);return l?e:[...e,t.Name]},[]),v=t.reduce((e,t)=>{let l=e.find(e=>t.Topic===e);return l?e:[...e,t.Topic]},[]),h=(0,f.useRouter)(),[x,m]=(0,s.useState)(t),[N,_]=(0,s.useState)([]),[S,j]=(0,s.useState)([]),[g,w]=(0,s.useState)(null),[T,y]=(0,s.useState)(null),{hot:E,topic:b,party:Z}=h.query,k=()=>{m(e=>[...(0,a.Uy)(e)])},O=e=>{console.log("q =>",e),h.push("/list"+(e?"?".concat(e):""),void 0,{shallow:!0})},P=t.reduce((e,t)=>{let l=e.findIndex(e=>e.topic===t.Topic);return -1===l?e=[...e,{topic:t.Topic,policies:[t]}]:e[l]={topic:t.Topic,policies:[...e[l].policies,t]},e},[]),C=()=>{let e=P.map(e=>{let t="".concat(e.topic," (").concat(e.policies.length,")");return{label:t,value:e.topic}}),l={label:"นโยบายทั้งหมด (".concat(t.length,")"),value:"นโยบายทั้งหมด"};e=[...e,l];let n=e.find(e=>e.value===b);b&&n?y(n):y(l),j(e)},q=()=>{let e=l.map(e=>{let l=t.filter(t=>{let l=t.Party.Name===e.Name,n=!0;return b&&(n=t.Topic===b),l&&n}),n="".concat(e.Name," (").concat(l.length,")");return{label:n,value:e.Name}}),n=P.find(e=>e.topic===b),i=n?n.policies.length:t.length,c={label:"ดูของทุกพรรค (".concat(i,")"),value:"ดูของทุกพรรค"};_(e=[...e,c]);let o=e.find(e=>e.value===Z);Z&&o?w(o):w(c)},X=()=>{C(),q()},G=()=>{let e=t,l=N.find(e=>e.value===Z);(null==Z?void 0:Z.toString())&&l&&(e=e.filter(e=>e.Party.Name===Z));let n=S.find(e=>e.value===b);(null==b?void 0:b.toString())&&n&&(e=e.filter(e=>e.Topic===(null==b?void 0:b.toString()))),m(e)},I=(e,t,l)=>{let n="";return v.find(e=>e===t)&&(n+="topic=".concat(t,"&")),d.find(t=>t===e)&&(n+="party=".concat(e,"&")),l&&(n+="hot=true&"),n};return(0,s.useEffect)(()=>{},[]),(0,s.useEffect)(()=>{X()},[b,Z]),(0,s.useEffect)(()=>{G();let e=I((null==g?void 0:g.value)||"",(null==T?void 0:T.value)||"",!!E);e&&O(e)},[g,T]),(0,n.jsxs)(p.Z,{title:E?"นโยบายประเด็นร้อน":"นโยบายตามประเด็น",children:[(0,n.jsx)(c.Z,{}),(0,n.jsx)(o.Z,{}),T&&g&&(0,n.jsxs)(r.Z,{policyList:x,children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-[16px]",children:[(0,n.jsx)(i.Z,{options:S,currentOption:T,onSelect:y}),(0,n.jsx)(i.Z,{options:N,currentOption:g,onSelect:w})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-[32px]",children:[(0,n.jsx)("p",{children:"เรียงตาม"}),(0,n.jsx)(u.Z,{onClick:k})]})]})]})};var v=!0;t.default=(0,s.memo)(d)}},function(e){e.O(0,[844,54,540,774,888,179],function(){return e(e.s=7833)}),_N_E=e.O()}]);