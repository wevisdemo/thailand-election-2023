(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{533:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[title]/[topic]",function(){return l(2421)}])},5328:function(e,t,l){"use strict";var r=l(2322),a=l(3244),n=l(2784);let c=e=>{let{options:t,currentOption:l,onSelect:c,placeholder:s,outline:o}=e,i=(0,n.useRef)(null),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{function e(e){i.current&&!i.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i]);let p=e=>{c(e),u(!1)};return(0,r.jsxs)("div",{className:"relative w-full",ref:i,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between hover:cursor-pointer ".concat(o?"p-[8px] border-b-[3px] border-[var(--color-black)]":"px-[16px] py-[10px] bg-[var(--color-white)] border-[3px] border-[var(--color-black)] rounded-[50px]"),onClick:()=>u(!d),children:[(0,r.jsx)("span",{className:null!==l?"text-[var(--color-black)]":"text-[var(--color-gray-3)]",children:l?l.label:s||"เลือกตัวเลือก"}),(0,r.jsx)("img",{className:"dropdown-arrow",src:"".concat(a.E,"/Chevron.svg"),alt:"dropdown-arrow",style:{transform:"".concat(d?"rotate(180deg)":"none")}})]}),d&&(0,r.jsx)("div",{className:"absolute w-full max-h-[300px] overflow-y-auto z-50 mt-[12px] p-[15px] bg-[var(--color-white)] border-[3px] border-[var(--color-black)] rounded-[10px]",children:t.map((e,t)=>(0,r.jsx)("div",{className:"[&:not(:first-child)]:border-t-[1px] border-[var(--color-black)] py-[5px] hover:cursor-pointer hover:bg-[var(--color-gray-1)]",onClick:()=>p(e),children:e.label},"option-".concat(t)))})]})};t.Z=c},1415:function(e,t,l){"use strict";l.d(t,{Z:function(){return o}});var r=l(2322),a=l(2784),n=l(1664),c=l.n(n),s=l(3244);function o(e){let{title:t,children:n}=e;return(0,a.useEffect)(()=>{l.e(303).then(l.bind(l,6303))}),(0,r.jsxs)("div",{className:"main-component",children:[(0,r.jsx)("election-header",{}),(0,r.jsxs)("div",{className:"max-w-[420px] md:container m-auto p-[16px]",children:["landing"!=t&&(0,r.jsxs)(c(),{href:"/",className:"flex mt-[16px]",children:[(0,r.jsx)("img",{src:"".concat(s.E,"/arrow.svg"),alt:"arrow"}),(0,r.jsx)("p",{className:"ml-[8px] typo-b2 font-kondolar font-bold",children:t})]}),(0,r.jsx)("div",{className:"mt-[24px]",children:n})]})]})}},4383:function(e,t,l){"use strict";var r=l(2322),a=l(3244);let n=e=>{let{onClick:t}=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center w-fit py-[8px] px-[16px] border-[1px] border-[var(--color-black)] rounded-[16px] hover:cursor-pointer",onClick:t,children:[(0,r.jsx)("p",{className:"typo-b4",children:"แรนด้อมใหม่"}),(0,r.jsx)("img",{src:"".concat(a.E,"/shuffle.svg"),alt:"shuffle",className:"ml-[8px]"})]})};t.Z=n},2421:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return f}});var r=l(2322),a=l(2784),n=l(1163),c=l(1415);let s=e=>{let{policyInfo:t}=e;var a=l(3054)();return(0,r.jsx)("div",{className:"bg-[var(--color-white)] border-[1px] border-[var(--color-gray-2)] rounded-[10px] overflow-hidden h-fit",children:(0,r.jsxs)("div",{className:"p-[12px] ",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("span",{className:"ml-[4px] typo-b7 font-bold",children:t.Party.Name})}),(0,r.jsx)("div",{className:"relative mt-[8px] w-full pb-[100%] h-0 rounded-[5px] bg-red-400",children:(0,r.jsx)("span",{className:"absolute px-[4px] top-[50%] left-[50%] w-full translate-x-[-50%] translate-y-[-50%] text-center typo-b4 text-[var(--color-white)] font-bold",children:t.Title})}),t.Explain&&(0,r.jsx)("div",{className:"mt-[8px] typo-b5 list",dangerouslySetInnerHTML:{__html:a.render(t.Explain||"-")}})]})})},o=e=>{let{policyList:t,secondList:l}=e;return(0,r.jsxs)("div",{className:"grid ".concat(l?"grid-cols-2 gap-[16px]":"grid-cols-1"),children:[(0,r.jsx)("div",{className:"grid ".concat(l?"grid-cols-1":"grid-cols-2 gap-[16px]"),children:t.map((e,t)=>(0,r.jsx)(s,{policyInfo:e},"first-card-".concat(t)))}),l&&(0,r.jsx)("div",{className:"grid-cols-1",children:l.map((e,t)=>(0,r.jsx)(s,{policyInfo:e},"second-card-".concat(t)))})]})};var i=l(4383);let d=e=>{let{policyList:t,children:l}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"grid gap-[8px]",children:l}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-[32px]",children:[(0,r.jsx)("p",{children:"เรียงตาม"}),(0,r.jsx)(i.Z,{onClick:()=>{}})]}),(0,r.jsx)("p",{className:"mt-[16px] px-[16px]",children:"ส่งข้อมูลให้ทีมงานเพื่ออัปเดตเพิ่มเติมที่ team@punchup.world"}),(0,r.jsx)("div",{className:"mt-[16px]",children:(0,r.jsx)(o,{policyList:t})})]})};var u=l(1612),p=l(5328);let x=()=>{let e=(0,n.useRouter)(),{title:t,topic:l,party:s}=e.query,[o,i]=(0,a.useState)([]),[x,f]=(0,a.useState)([]),[v,m]=(0,a.useState)([]),[b,h]=(0,a.useState)([]),[j,w]=(0,a.useState)(null),[y,N]=(0,a.useState)(null),g=async()=>{let e=await (0,u.Yo)();await i(e);let t=(0,u.kE)(Object.keys((0,u.vM)(e,"Topic")),"policies");await h([{label:"นโยบายทั้งหมด"},...t])},E=async()=>{let e=await (0,u.xr)(),t=(0,u.kE)(e,"parties");await m([{label:"ดูของทุกพรรค"},...t])};return(0,a.useEffect)(()=>{g(),E()},[]),(0,a.useEffect)(()=>{l&&N({label:"".concat(l)}),s&&w({label:"".concat(s)})},[l,s]),(0,a.useEffect)(()=>{o&&f((0,u.ix)(o,j,y)),(t&&y||j)&&(0,u.mj)(e,t,null==y?void 0:y.label,null==j?void 0:j.label)},[o,j,y]),(0,r.jsx)(c.Z,{title:t,children:l&&x&&(0,r.jsxs)(d,{policyList:x,children:[(0,r.jsx)(p.Z,{options:v,currentOption:j,onSelect:w}),(0,r.jsx)(p.Z,{options:b,currentOption:y,onSelect:N})]})})};var f=(0,a.memo)(x)},1612:function(e,t,l){"use strict";l.d(t,{xr:function(){return o},Yo:function(){return i},kE:function(){return c},ix:function(){return n},vM:function(){return r},mj:function(){return a}});let r=(e,t)=>e.reduce(function(e,l){return(e[l[t]]=e[l[t]]||[]).push(l),e},{}),a=(e,t,l,r)=>{e.push("/".concat(t,"/").concat(l,"/").concat(r?"?party="+r:""),void 0,{shallow:!0})},n=(e,t,l)=>{let r=null==e?void 0:e.filter(r=>t&&l&&(null==t?void 0:t.label)!="ดูของทุกพรรค"&&(null==l?void 0:l.label)!="นโยบายทั้งหมด"?r.Party.Name==(null==t?void 0:t.label)&&r.Topic===(null==l?void 0:l.label):t&&(null==t?void 0:t.label)!="ดูของทุกพรรค"?r.Party.Name==(null==t?void 0:t.label):l&&(null==l?void 0:l.label)!="นโยบายทั้งหมด"?r.Topic===(null==l?void 0:l.label):e);return r},c=(e,t)=>e.map(e=>({label:"parties"===t?e.Name:e}));var s=l(3871);let o=async()=>{let e=await s.U.Parties.fetchAll({where:"(PartyType,eq,พรรค)"});return e},i=async()=>{let e=await s.U.Policies.fetchAll({});return e}},3244:function(e,t,l){"use strict";l.d(t,{E:function(){return r}});let r="/policyshop"},3871:function(e,t,l){"use strict";l.d(t,{U:function(){return s}});var r=l(2382);async function a(e,t){let{data:l}=await r.Z.get(`https://sheets.wevis.info/api/v1/db/public/shared-view/${e}/rows`,{params:t});return l.data}let n=(e,t)=>({fetch:l=>a(e,{...t,...l}),fetchAll:l=>c(e,{...t,...l})});async function c(e,t){let l=[],r=null;do{let n=await a(e,{...t,offset:r?r.page*r.pageSize:0,limit:200});l.push(...n.list),r=n.pageInfo}while(!r?.isLastPage);return l}let s={Parties:n("40065196-c978-4d7a-b3fb-fb84694383a7"),People:n("572c5e5c-a3d8-440f-9a70-3c4c773543ec",{"nested[PeoplePartyHistory][fields]":"Party,EstablishedDate"}),VoteLog:n("e06d1465-2786-4799-9c0f-a20f4cf71ec4"),PeopleVotes:n("e58433cc-f4fd-499b-926d-05431412cbba"),Policies:n("d930acb2-b1f8-4a85-9ed9-04c2b1edc951")}}},function(e){e.O(0,[664,382,244,774,888,179],function(){return e(e.s=533)}),_N_E=e.O()}]);