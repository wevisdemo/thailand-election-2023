import{w as S,d as b}from"./index.9e773dc6.js";import{b as B}from"./paths.b50c62a5.js";import{p as D}from"./party.e98dd6ca.js";import{R as L}from"./index.495c775b.js";var I={},U={},N=34,T=10,O=13;function M(r){return new Function("d","return {"+r.map(function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'}).join(",")+"}")}function _(r,n){var e=M(r);return function(a,o){return n(e(a),o,r)}}function F(r){var n=Object.create(null),e=[];return r.forEach(function(a){for(var o in a)o in n||e.push(n[o]=o)}),e}function c(r,n){var e=r+"",a=e.length;return a<n?new Array(n-a+1).join(0)+e:e}function Y(r){return r<0?"-"+c(-r,6):r>9999?"+"+c(r,6):c(r,4)}function Z(r){var n=r.getUTCHours(),e=r.getUTCMinutes(),a=r.getUTCSeconds(),o=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Y(r.getUTCFullYear())+"-"+c(r.getUTCMonth()+1,2)+"-"+c(r.getUTCDate(),2)+(o?"T"+c(n,2)+":"+c(e,2)+":"+c(a,2)+"."+c(o,3)+"Z":a?"T"+c(n,2)+":"+c(e,2)+":"+c(a,2)+"Z":e||n?"T"+c(n,2)+":"+c(e,2)+"Z":"")}function $(r){var n=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function a(t,u){var l,f,i=o(t,function(h,m){if(l)return l(h,m-1);f=h,l=u?_(h,u):M(h)});return i.columns=f||[],i}function o(t,u){var l=[],f=t.length,i=0,h=0,m,w=f<=0,d=!1;t.charCodeAt(f-1)===T&&--f,t.charCodeAt(f-1)===O&&--f;function P(){if(w)return U;if(d)return d=!1,I;var E,j=i,g;if(t.charCodeAt(j)===N){for(;i++<f&&t.charCodeAt(i)!==N||t.charCodeAt(++i)===N;);return(E=i)>=f?w=!0:(g=t.charCodeAt(i++))===T?d=!0:g===O&&(d=!0,t.charCodeAt(i)===T&&++i),t.slice(j+1,E-1).replace(/""/g,'"')}for(;i<f;){if((g=t.charCodeAt(E=i++))===T)d=!0;else if(g===O)d=!0,t.charCodeAt(i)===T&&++i;else if(g!==e)continue;return t.slice(j,E)}return w=!0,t.slice(j,f)}for(;(m=P())!==U;){for(var A=[];m!==I&&m!==U;)A.push(m),m=P();u&&(A=u(A,h++))==null||l.push(A)}return l}function s(t,u){return t.map(function(l){return u.map(function(f){return R(l[f])}).join(r)})}function p(t,u){return u==null&&(u=F(t)),[u.map(R).join(r)].concat(s(t,u)).join(`
`)}function v(t,u){return u==null&&(u=F(t)),s(t,u).join(`
`)}function C(t){return t.map(y).join(`
`)}function y(t){return t.map(R).join(r)}function R(t){return t==null?"":t instanceof Date?Z(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:a,parseRows:o,format:p,formatBody:v,formatRows:C,formatRow:y,formatValue:R}}var k=$(","),H=k.parse;function V(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.text()}function J(r,n){return fetch(r,n).then(V)}function Q(r){return function(n,e,a){return arguments.length===2&&typeof e=="function"&&(a=e,e=void 0),J(n,e).then(function(o){return r(o,a)})}}var W=Q(H);const q=`${B}/data/popularity-projection-2566.csv`,z=()=>{const{subscribe:r,update:n}=S({});return{subscribe:r,load:async()=>{const e=L(D),o=(await W(q)).reduce((s,{province:p,electorialDistrictNumber:v,party:C,points:y})=>(s[p]||(s[p]={}),s[p][+v]||(s[p][+v]=[]),e.map.get(C)||D.add({Name:C}),s[p][+v].push({party:e.map.get(C),points:+y}),s),{});n(()=>o)},calculate(){}}},G=z(),tr=b(G,r=>{const n={};return Object.values(r).forEach(e=>Object.values(e).forEach(a=>{const{party:o}=a[0];o&&(n[o.Name]||(n[o.Name]={party:o,fromDistrict:0,fromPartylist:0,total:0}),n[o.Name].fromDistrict++,n[o.Name].fromPartylist++,n[o.Name].total+=2)})),Object.values(n).sort((e,a)=>a.total-e.total)});export{W as c,G as d,tr as r};
