import{w as M,d as S}from"./index.28db0802.js";import{b}from"./paths.4d4f8049.js";import{p as B}from"./party.7f05bc38.js";import{R as L}from"./index.f98e629c.js";var D={},U={},N=34,g=10,O=13;function F(r){return new Function("d","return {"+r.map(function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'}).join(",")+"}")}function _(r,n){var e=F(r);return function(a,o){return n(e(a),o,r)}}function I(r){var n=Object.create(null),e=[];return r.forEach(function(a){for(var o in a)o in n||e.push(n[o]=o)}),e}function c(r,n){var e=r+"",a=e.length;return a<n?new Array(n-a+1).join(0)+e:e}function Y(r){return r<0?"-"+c(-r,6):r>9999?"+"+c(r,6):c(r,4)}function Z(r){var n=r.getUTCHours(),e=r.getUTCMinutes(),a=r.getUTCSeconds(),o=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Y(r.getUTCFullYear())+"-"+c(r.getUTCMonth()+1,2)+"-"+c(r.getUTCDate(),2)+(o?"T"+c(n,2)+":"+c(e,2)+":"+c(a,2)+"."+c(o,3)+"Z":a?"T"+c(n,2)+":"+c(e,2)+":"+c(a,2)+"Z":e||n?"T"+c(n,2)+":"+c(e,2)+"Z":"")}function $(r){var n=new RegExp('["'+r+`
\r]`),e=r.charCodeAt(0);function a(t,u){var l,f,i=o(t,function(h,m){if(l)return l(h,m-1);f=h,l=u?_(h,u):F(h)});return i.columns=f||[],i}function o(t,u){var l=[],f=t.length,i=0,h=0,m,w=f<=0,d=!1;t.charCodeAt(f-1)===g&&--f,t.charCodeAt(f-1)===O&&--f;function P(){if(w)return U;if(d)return d=!1,D;var A,E=i,C;if(t.charCodeAt(E)===N){for(;i++<f&&t.charCodeAt(i)!==N||t.charCodeAt(++i)===N;);return(A=i)>=f?w=!0:(C=t.charCodeAt(i++))===g?d=!0:C===O&&(d=!0,t.charCodeAt(i)===g&&++i),t.slice(E+1,A-1).replace(/""/g,'"')}for(;i<f;){if((C=t.charCodeAt(A=i++))===g)d=!0;else if(C===O)d=!0,t.charCodeAt(i)===g&&++i;else if(C!==e)continue;return t.slice(E,A)}return w=!0,t.slice(E,f)}for(;(m=P())!==U;){for(var R=[];m!==D&&m!==U;)R.push(m),m=P();u&&(R=u(R,h++))==null||l.push(R)}return l}function s(t,u){return t.map(function(l){return u.map(function(f){return y(l[f])}).join(r)})}function p(t,u){return u==null&&(u=I(t)),[u.map(y).join(r)].concat(s(t,u)).join(`
`)}function v(t,u){return u==null&&(u=I(t)),s(t,u).join(`
`)}function j(t){return t.map(T).join(`
`)}function T(t){return t.map(y).join(r)}function y(t){return t==null?"":t instanceof Date?Z(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:a,parseRows:o,format:p,formatBody:v,formatRows:j,formatRow:T,formatValue:y}}var k=$(","),H=k.parse;function V(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.text()}function J(r,n){return fetch(r,n).then(V)}function Q(r){return function(n,e,a){return arguments.length===2&&typeof e=="function"&&(a=e,e=void 0),J(n,e).then(function(o){return r(o,a)})}}var W=Q(H);const q=`${b}/data/popularity-2562.csv`,z=()=>{const{subscribe:r,update:n}=M({});return{subscribe:r,load:async()=>{const e=L(B),o=(await W(q)).reduce((s,{province:p,electorialDistrictNumber:v,party:j,points:T})=>(s[p]||(s[p]={}),s[p][v]||(s[p][v]=[]),s[p][v].push({party:e.map.get(j),points:+T}),s),{});n(()=>o)},calculate(){}}},G=z(),tr=S(G,r=>{const n={};return Object.values(r).forEach(e=>Object.values(e).forEach(a=>{const{party:o}=a[0];o&&(n[o.Name]||(n[o.Name]={party:o,fromDistrict:0,fromPartylist:0,total:0}),n[o.Name].fromDistrict++,n[o.Name].total++)})),Object.values(n).sort((e,a)=>a.total-e.total)});export{G as d,tr as r};
