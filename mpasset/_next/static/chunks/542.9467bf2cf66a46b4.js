"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{7542:function(t,e,a){a.r(e);var r=a(2322),l=a(2784),s=a(9155),n=a(4640);let c=()=>{let{selectedPerson:t}=(0,n.j)(),e=l.useRef(null),[a,c]=l.useState(),[i,o]=l.useState(!0),[h,d]=l.useState(!0),p=l.useCallback(()=>{console.log(t)},[t]);l.useEffect(()=>{p()},[t,p]);let x=l.useCallback(()=>{s.gyn("data/sample.csv").then(t=>{let e=t.slice(0,t.length);if(e){let a=s.QP8().id(t=>t.id).parentId(t=>t.parentId),r=a(e);r.descendants().forEach((t,e)=>{t._children=t.children,t.depth>0&&(t.children=void 0)}),c(r)}}).catch(t=>{console.log(t)})},[]);l.useEffect(()=>{x()},[x]);let g=t=>{0!==t.height&&(t.children=t.children?void 0:t._children,d(!0))};return l.useEffect(()=>{if(a){var t,r;console.log(a);let l=s.Ys(e.current),n=Number(null===(t=e.current.parentElement)||void 0===t?void 0:t.clientWidth),c=Number(null===(r=e.current.parentElement)||void 0===r?void 0:r.clientHeight);l.attr("width",n),l.attr("height",c);let i={TOP:10,RIGHT:10,BOTTOM:10,LEFT:10},o=n-i.LEFT-i.RIGHT,h=c-i.TOP-i.BOTTOM;l.select(".chart-margin").attr("width",o).attr("height",h).attr("transform","translate(".concat(i.LEFT,", ").concat(i.TOP,")"));let p=.25*h,x=.1*p,u=s.G_s().size([2*Math.PI,p]).separation((t,e)=>(t.parent==e.parent?1:2)/t.depth).nodeSize([2*Math.PI/a.children.length,.15*o]),f=s.eRy().duration(500).tween("resize",()=>()=>l.dispatch("toggle")),y=l.select(".chart-area").attr("transform","translate(".concat(.5*o,",").concat(.5*h,")"));u(a).links();let m=(t,e)=>[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)],k=y.select(".node-layer"),v=k.selectAll("g").data(a.descendants()),j=v.enter().append("g").attr("fill-opacity",0).attr("stroke-opacity",0).attr("cursor","pointer").attr("pointer-events","all").on("click",(t,e)=>{g(e)});j.append("rect").attr("width",x).attr("height",x).attr("fill","#fff"),j.append("text").attr("fill","#F00").attr("stroke","#555").attr("font-size","10").style("transform",t=>"rotate(".concat(t.x<=Math.PI/8?180:0,"deg)")).text(t=>t.id),v.merge(v).transition(f).attr("transform",t=>"rotate(".concat(180*t.x/Math.PI-90,") translate(").concat(t.y-.5*x,", ").concat(-(.5*x),")")).attr("fill-opacity",1).attr("stroke-opacity",1),v.exit().transition(f).remove().attr("transform",t=>"rotate(".concat(180*t.x0/Math.PI-90,") translate(").concat(t.y0,", ").concat(-(.5*x),")")).attr("fill-opacity",0).attr("stroke-opacity",0);let N=y.select(".link-layer"),T=N.selectAll(".link").data(a.links());T.enter().append("line").transition(f).attr("class","link").attr("stroke","#ccc").attr("stroke-opacity",0),T.merge(T).transition(f).attr("stroke-opacity",1).attr("x1",t=>m(t.source.x,t.source.y)[0]).attr("y1",t=>m(t.source.x,t.source.y)[1]).attr("x2",t=>m(t.target.x,t.target.y)[0]).attr("y2",t=>m(t.target.x,t.target.y)[1]),T.exit().transition(f).remove().attr("stroke-opacity",0),a.eachBefore(t=>{t.parent&&(t.x0=t.parent.x,t.y0=t.parent.y)}),d(!1)}},[e,a,i,h]),(0,r.jsx)("div",{className:"w-full h-full bg-green-500 max-w-[800px] mx-auto",children:(0,r.jsx)("svg",{ref:e,children:(0,r.jsxs)("g",{className:"chart-margin",children:[(0,r.jsx)("g",{className:"x-axis"}),(0,r.jsx)("g",{className:"y-axis"}),(0,r.jsx)("g",{className:"x-label",children:(0,r.jsx)("text",{})}),(0,r.jsx)("g",{className:"y-label",children:(0,r.jsx)("text",{})}),(0,r.jsxs)("g",{className:"chart-area",children:[(0,r.jsx)("g",{className:"link-layer"}),(0,r.jsx)("g",{className:"node-layer"})]})]})})})};e.default=c}}]);