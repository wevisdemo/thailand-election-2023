"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{9058:function(t,e,a){a.r(e);var r=a(2322),l=a(2784),s=a(1322),c=a(7725);let n=()=>{let{selectedCompany:t}=(0,c.j)(),e=l.useRef(null),a=l.useRef(null),[n,i]=l.useState({width:0,height:0});return s.Z1g("%Y"),l.useEffect(()=>{if(t){let e=t.financial,r=s.Ys(a.current),l=Number(n.width),c=Number(n.height);r.attr("width",l),r.attr("height",c);let i={TOP:10,RIGHT:12,BOTTOM:20,LEFT:12},o=l-i.LEFT-i.RIGHT,h=c-i.TOP-i.BOTTOM;r.select(".chart-margin").attr("width",o).attr("height",h).attr("transform","translate(".concat(i.LEFT,", ").concat(i.TOP,")"));let d=s.Xf().domain([new Date(2018,0,1),new Date(2020,12,31)]).range([i.LEFT,o-i.RIGHT]),[u,m]=s.Wem(e,t=>Number(t.income)),f=s.BYU().domain([u||0,m||1e5]).range([h-i.TOP,i.BOTTOM]),k=s.eRy().duration(100),x=s.i$Z("%Y"),g=s.LLu(d).ticks(s.jBk.every(1)).tickFormat(t=>"".concat(Number(x(t))+543));r.select(".x-axis").attr("transform","translate(0,".concat(h,")")).transition(k).call(g).call(t=>t.select(".domain").attr("stroke-width","3px").attr("stroke","black")).call(t=>t.selectAll(".tick").select("line").attr("stroke-width","3px").attr("stroke","black")).call(t=>t.selectAll(".tick").select("text").attr("font-size","10px").attr("fill","black"));let p=s.WUZ(".2s"),w=t=>{let e=p(t);switch(e[e.length-1]){case"G":return e.slice(0,-1)+"B";case"k":return e.slice(0,-1)+"K"}return e},T=s.y4O(f).offset(20).tickFormat(t=>"".concat(w(t)));r.select(".y-axis").transition(k).call(T).attr("transform","translate(".concat(i.LEFT+20,",-").concat(i.BOTTOM+6,")")).call(t=>t.select(".domain").remove()).call(t=>t.selectAll(".tick").select("line").remove()).call(t=>t.selectAll(".tick").select("text").attr("font-size","10px").attr("fill","black"));let v=r.select(".chart-area");v.selectAll("line").remove(),v.selectAll("line").data(f.ticks()).enter().append("line").attr("class","horizontalGrid").attr("x1",0).attr("x2",o).attr("y1",t=>f(t)).attr("y2",t=>f(t)).attr("stroke","black").attr("stroke-width","1px").attr("stroke-dasharray","2 2");let j=s.jvg().x(t=>d(new Date(Number(t.year)-543,0,1))).y(t=>f(t.income)),y=r.select(".chart-area");y.selectAll("path").remove(),y.append("path").attr("class","line").attr("fill","none").attr("stroke","black").attr("stroke-width","3px").transition(k).attr("d",j(e)),Array.isArray(t.gov_fund_proj)&&t.gov_fund_proj.length>0&&v.append("g").selectAll("line").data(t.gov_fund_proj).enter().append("line").attr("class","plot-gov-fund").attr("x1",t=>d(new Date(t.วันที่ลงนามในสัญญา))).attr("x2",t=>d(new Date(t.วันที่ลงนามในสัญญา))).attr("y1",0).attr("y2",h).attr("stroke","#00EAA4").attr("stroke-width","2px")}},[a,t,n]),l.useEffect(()=>{function t(){e.current&&i({width:e.current.clientWidth,height:e.current.clientHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"w-full h-[228px] mx-auto relative",ref:e,children:(0,r.jsx)("svg",{ref:a,children:(0,r.jsxs)("g",{className:"chart-margin",children:[(0,r.jsx)("g",{className:"x-axis"}),(0,r.jsx)("g",{className:"y-axis"}),(0,r.jsx)("g",{className:"chart-area"}),(0,r.jsx)("g",{className:"tooltip-area"}),(0,r.jsx)("g",{className:"legend"})]})})})})};e.default=n}}]);