"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{2193:function(e,t,a){a.r(t);var r=a(2322),n=a(2784),c=a(7673),l=a(7725);let s=()=>{let{selectedPerson:e,selectedCompany:t}=(0,l.j)(),a=n.useRef(null),s=n.useRef(null),[i,d]=n.useState(),[o,h]=n.useState("director"),[p,u]=n.useState({width:0,height:0});return n.useEffect(()=>{if(i){var e,t;let a=c.Ys(s.current),r=Number(null===(e=s.current.parentElement)||void 0===e?void 0:e.clientWidth),n=Number(null===(t=s.current.parentElement)||void 0===t?void 0:t.clientHeight);a.attr("width",r),a.attr("height",n);let l={TOP:0,RIGHT:0,BOTTOM:0,LEFT:0},d=r-l.LEFT-l.RIGHT,o=n-l.TOP-l.BOTTOM;a.select(".chart-margin").attr("width",d).attr("height",o).attr("transform","translate(".concat(l.LEFT,", ").concat(l.TOP,")"));let h={inner:0,top:0,right:0,bottom:0,left:0},p=i.leaves(),u=a.select(".chart-area").style("overflow","hidden");c.pNI().tile(c.wLP).size([d,o]).paddingInner(h.inner).paddingTop(h.top).paddingRight(h.right).paddingBottom(h.bottom).paddingLeft(h.left).round(!0)(i);let m=u.selectAll("g").data(p).join("g").attr("transform",e=>"translate(".concat(e.x0,",").concat(e.y0,")"));m.select("rect").remove(),m.append("rect").attr("fill",e=>{var t;return(null===(t=e.data.shareholderData)||void 0===t?void 0:t.person)?"#DFDAD1":"#9A948C"}).attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("stroke","black").attr("stroke-weight","2"),m.select("text").remove(),m.append("text").selectAll("tspan").data(e=>e.data.percentage>2?["".concat(e.data.percentage,"%")]:[]).join("tspan").attr("x",4).attr("y","24px").attr("font-size","21px").text(e=>e)}},[s,i]),n.useEffect(()=>{if(t&&e){let e=[{id:"company-".concat(t.company_id),parentId:"",companyData:t,percentage:0}];Array.isArray(t.company_shareholder)&&t.company_shareholder.length>0?(e=[...e,...t.company_shareholder.map(e=>({id:"".concat(e.Firstname.replaceAll(" ","-"),"-").concat(e.Lastname.replaceAll(" ","-")),parentId:"company-".concat(t.company_id),shareholderData:e,percentage:e.pct_share}))],h("shareholder")):(e=[...e],h("director"));let a=c.QP8().id(e=>e.id).parentId(e=>e.parentId),r=a(e);r.count(),r.sum(e=>e.percentage),d(r)}},[e,t]),n.useEffect(()=>{function e(){a.current&&u({width:a.current.clientWidth,height:a.current.clientHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,r.jsx)("div",{className:"w-full h-[200px] bg-green-500 max-w-[800px] mx-auto",children:(0,r.jsx)("svg",{ref:s,className:"rounded-[5px] border-[2px] border-black",children:(0,r.jsxs)("g",{className:"chart-margin",children:[(0,r.jsx)("g",{className:"x-axis"}),(0,r.jsx)("g",{className:"y-axis"}),(0,r.jsx)("g",{className:"x-label",children:(0,r.jsx)("text",{})}),(0,r.jsx)("g",{className:"y-label",children:(0,r.jsx)("text",{})}),(0,r.jsx)("g",{className:"chart-area"})]})})})};t.default=s}}]);