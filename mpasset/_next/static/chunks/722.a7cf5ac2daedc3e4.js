"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{7888:function(t,e,a){a.r(e);var l=a(2322),r=a(2784),s=a(5579),c=a(4640);let n=()=>{let{selectedCompany:t}=(0,c.j)(),e=r.useRef(null),a=r.useRef(null),[n,i]=r.useState({width:0,height:0});return s.Z1g("%Y"),r.useEffect(()=>{if(t){let e=t.financial,l=s.Ys(a.current),r=Number(n.width),c=Number(n.height);l.attr("width",r),l.attr("height",c);let i={TOP:10,RIGHT:12,BOTTOM:20,LEFT:12},o=r-i.LEFT-i.RIGHT,h=c-i.TOP-i.BOTTOM;l.select(".chart-margin").attr("width",o).attr("height",h).attr("transform","translate(".concat(i.LEFT,", ").concat(i.TOP,")"));let d=s.Xf().domain([new Date(2018,0,1),new Date(2020,12,31)]).range([i.LEFT,o-i.RIGHT]),[u,m]=s.Wem(e,t=>Number(t.income));console.log([u,m]);let k=s.BYU().domain([u||0,m||1e5]).range([h-i.TOP,i.BOTTOM]),x=s.eRy().duration(100),f=s.i$Z("%Y"),g=s.LLu(d).ticks(s.jBk.every(1)).tickFormat(t=>"".concat(Number(f(t))+543));l.select(".x-axis").attr("transform","translate(0,".concat(h,")")).transition(x).call(g).call(t=>t.select(".domain").attr("stroke-width","3px").attr("stroke","black")).call(t=>t.selectAll(".tick").select("line").attr("stroke-width","3px").attr("stroke","black")).call(t=>t.selectAll(".tick").select("text").attr("font-size","10px").attr("fill","black"));let p=s.WUZ(".2s"),w=t=>{let e=p(t);switch(e[e.length-1]){case"G":return e.slice(0,-1)+"B";case"k":return e.slice(0,-1)+"K"}return e},T=s.y4O(k).offset(20).tickFormat(t=>"".concat(w(t)));l.select(".y-axis").transition(x).call(T).attr("transform","translate(".concat(i.LEFT+20,",-").concat(i.BOTTOM+6,")")).call(t=>t.select(".domain").remove()).call(t=>t.selectAll(".tick").select("line").remove()).call(t=>t.selectAll(".tick").select("text").attr("font-size","10px").attr("fill","black"));let v=l.select(".chart-area");v.selectAll("line").remove(),v.selectAll("line").data(k.ticks()).enter().append("line").attr("class","horizontalGrid").attr("x1",0).attr("x2",o).attr("y1",t=>k(t)).attr("y2",t=>k(t)).attr("stroke","black").attr("stroke-width","1px").attr("stroke-dasharray","2 2");let N=s.jvg().x(t=>d(new Date(Number(t.year)-543,0,1))).y(t=>k(t.income));console.log(d(new Date(Number("2566")-543,3,2)));let b=l.select(".chart-area");b.selectAll("path").remove(),b.append("path").attr("class","line").attr("fill","none").attr("stroke","black").attr("stroke-width","3px").transition(x).attr("d",N(e)),t.gov_fund_proj.length>0&&v.append("g").selectAll("line").data(t.gov_fund_proj).enter().append("line").attr("class","plot-gov-fund").attr("x1",t=>(console.log(new Date(t.วันที่ลงนามในสัญญา)),console.log(t.วันที่ลงนามในสัญญา),d(new Date(t.วันที่ลงนามในสัญญา)))).attr("x2",t=>d(new Date(t.วันที่ลงนามในสัญญา))).attr("y1",0).attr("y2",h).attr("stroke","#00EAA4").attr("stroke-width","2px")}},[a,t,n]),r.useEffect(()=>{function t(){e.current&&i({width:e.current.clientWidth,height:e.current.clientHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"w-full h-[228px] mx-auto relative",ref:e,children:(0,l.jsx)("svg",{ref:a,children:(0,l.jsxs)("g",{className:"chart-margin",children:[(0,l.jsx)("g",{className:"x-axis"}),(0,l.jsx)("g",{className:"y-axis"}),(0,l.jsx)("g",{className:"chart-area"}),(0,l.jsx)("g",{className:"tooltip-area"}),(0,l.jsx)("g",{className:"legend"})]})})})})};e.default=n}}]);