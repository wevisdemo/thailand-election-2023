"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[445],{6445:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var a,l,s=r(2322),n=r(2784),o=r(4640),i=r(8018);let c=e=>(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-[20px] flex-grow",children:[(0,s.jsx)(i.r,{}),(0,s.jsx)("div",{className:"typo-b4 typo-ibmplex leading-[150%]",children:"รอสักครู่..."})]}),d=()=>(0,s.jsx)("div",{className:"h-screen flex flex-col",children:(0,s.jsx)(c,{})});var u=r(5579),h=r(5237),f=r.n(h),p=r(5555);let b=f()(()=>Promise.all([r.e(453),r.e(631),r.e(21)]).then(r.bind(r,2021)),{loadableGenerated:{webpack:()=>[2021]},loading:()=>(0,s.jsx)(d,{})}),E=f()(()=>Promise.all([r.e(453),r.e(368)]).then(r.bind(r,8368)),{loadableGenerated:{webpack:()=>[8368]},loading:()=>(0,s.jsx)(d,{})}),m=f()(()=>Promise.all([r.e(453),r.e(631),r.e(236)]).then(r.bind(r,7236)),{loadableGenerated:{webpack:()=>[7236]},loading:()=>(0,s.jsx)(d,{})});(a=l||(l={}))[a.MAIN_VIEW=0]="MAIN_VIEW",a[a.SELCTED_PERSON_CHART=1]="SELCTED_PERSON_CHART",a[a.SELECTED_COMPANY_CHART=2]="SELECTED_COMPANY_CHART";let x=e=>{let[t,r]=n.useState(!0),{person:a,setPerson:i,selectedPerson:c,setPersonOutlier:h,selectedCompany:f,party:x,setParty:N,setFilterPerson:S}=(0,o.j)(),[C,P]=n.useState(l.MAIN_VIEW),_=n.useCallback(async()=>{await u.AVB("https://raw.githubusercontent.com/wevisdemo/thailand-election-2023/main/apps/mpasset/crawler/public/data/people.json").then(e=>{if(e){e.forEach(e=>{e.totalValueShare=e.totalValueShare||0,e.countCompShare=e.countCompShare||0,e.countDirector=e.countDirector||0,e.totalPctShare=e.totalPctShare||0});let t=e.sort((e,t)=>t.totalValueShare-e.totalValueShare);t=(0,p.n9)(e,"countCompShare","countDirector"),console.log("fetch from git"),h(t.slice(0,1)),i(t.slice(1)),S(t.slice(1))}})},[i,h,S]);return(n.useEffect(()=>{let e=!1;return a.length<=0&&x.length<=0?e||_():r(!1),()=>{e=!0}},[a,i,x,N,_]),n.useLayoutEffect(()=>{f?P(l.SELECTED_COMPANY_CHART):c?P(l.SELCTED_PERSON_CHART):P(l.MAIN_VIEW)},[c,f]),t)?(0,s.jsx)(d,{}):C===l.MAIN_VIEW?(0,s.jsx)("div",{className:"h-full inset-0 flex flex-col relative overflow-hidden",children:(0,s.jsx)(b,{})}):C===l.SELCTED_PERSON_CHART?(0,s.jsx)("div",{className:"h-full inset-0 flex flex-col relative overflow-hidden",children:(0,s.jsx)(E,{})}):C===l.SELECTED_COMPANY_CHART?(0,s.jsx)("div",{className:"h-full inset-0 flex flex-col relative overflow-hidden",children:(0,s.jsx)(m,{})}):(0,s.jsx)(d,{})};var N=x},5555:function(e,t,r){function a(e,t,r){return e.filter(e=>Number(e[t])>0).concat(e.filter(e=>0==Number(e[t])).sort((e,t)=>Number(t[r])-Number(e[r])))}function l(e){let t=Math.abs(Number(e))>=1e9?(Math.abs(Number(e))/1e9).toFixed(2)+"B":Math.abs(Number(e))>=1e6?(Math.abs(Number(e))/1e6).toFixed(2)+"M":Math.abs(Number(e))>=1e3?(Math.abs(Number(e))/1e3).toFixed(2)+"K":Math.abs(Number(e))+"฿";return e>0?t:"-".concat(t)}function s(e){return e.toString().replace(RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")}r.d(t,{B0:function(){return l},n9:function(){return a},x6:function(){return s}})},4640:function(e,t,r){r.d(t,{j:function(){return s}});var a=r(624),l=r(7832);let s=(0,a.Ue)()((0,l.tJ)((e,t)=>({person:[],setPerson:t=>e(e=>({...e,person:t})),personOutlier:[],setPersonOutlier:t=>e(e=>({...e,personOutlier:t})),filterPerson:[],setFilterPerson:t=>e(e=>({...e,filterPerson:t})),selectedPerson:void 0,setSelectedPerson:t=>e(e=>({...e,selectedPerson:t})),directorData:[],setDirectorData:t=>e(e=>({...e,directorData:t})),shareholderData:[],setShareholderData:t=>e(e=>({...e,shareholderData:t})),selectedCompany:void 0,setSelectedCompany:t=>e(e=>({...e,selectedCompany:t})),selectedBusinessType:void 0,setSelectedBusinessType:t=>e(e=>({...e,selectedBusinessType:t})),party:[],setParty:t=>e(e=>({...e,party:t})),selectedParty:void 0,setSelectedParty:t=>e(e=>({...e,selectedParty:t}))}),{name:"person",storage:(0,l.FL)(()=>sessionStorage),partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return["person","personOutlier","party","filterPerson"].includes(t)})),onRehydrateStorage:e=>(console.log("hydration starts"),(e,t)=>{t?console.log("an error happened during hydration",t):console.log("hydration finished")})}))}}]);