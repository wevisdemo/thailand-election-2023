"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{5900:function(e,t,a){a.r(t);var r=a(2322),n=a(2784),l=a(5579),c=a(4640);let s=()=>{let{selectedPerson:e,selectedCompany:t}=(0,c.j)(),a=n.useRef(null),s=n.useRef(null),[i,o]=n.useState(),[d,h]=n.useState("director"),[p,g]=n.useState({width:0,height:0});return n.useEffect(()=>{if(i){var e,t;console.log(i);let a=l.Ys(s.current),r=Number(null===(e=s.current.parentElement)||void 0===e?void 0:e.clientWidth),n=Number(null===(t=s.current.parentElement)||void 0===t?void 0:t.clientHeight);a.attr("width",r),a.attr("height",n);let c={TOP:0,RIGHT:0,BOTTOM:0,LEFT:0},o=r-c.LEFT-c.RIGHT,d=n-c.TOP-c.BOTTOM;a.select(".chart-margin").attr("width",o).attr("height",d).attr("transform","translate(".concat(c.LEFT,", ").concat(c.TOP,")"));let h={inner:0,top:0,right:0,bottom:0,left:0},p=i.leaves();console.log("leaves",p);let g=a.select(".chart-area").style("overflow","hidden");l.pNI().tile(l.wLP).size([o,d]).paddingInner(h.inner).paddingTop(h.top).paddingRight(h.right).paddingBottom(h.bottom).paddingLeft(h.left).round(!0)(i),console.log(i);let m=g.selectAll("g").data(p).join("g").attr("transform",e=>"translate(".concat(e.x0,",").concat(e.y0,")"));m.select("rect").remove(),m.append("rect").attr("fill","#9A948C").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("stroke","black").attr("stroke-weight","2"),m.select("text").remove(),m.append("text").selectAll("tspan").data(e=>e.data.percentage>2?["".concat(e.data.percentage,"%")]:[]).join("tspan").attr("x",2).attr("y","21px").attr("font-size","21px").text(e=>e)}},[s,i]),n.useEffect(()=>{if(t&&e){let a=[{id:"company-".concat(t.company_id),parentId:"",companyData:t,percentage:0}];Array.isArray(t.company_shareholder)&&t.company_shareholder.length>0?(a=[...a,...t.company_shareholder.map(e=>({id:"".concat(e.Firstname.replaceAll(" ","-"),"-").concat(e.Lastname.replaceAll(" ","-")),parentId:"company-".concat(t.company_id),shareholderData:e,percentage:e.pct_share}))],h("shareholder")):(a=[...a],h("director"));let r=l.QP8().id(e=>e.id).parentId(e=>e.parentId),n=r(a);n.count(),n.sum(e=>e.percentage),o(n)}},[e,t]),n.useEffect(()=>{function e(){a.current&&g({width:a.current.clientWidth,height:a.current.clientHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,r.jsx)("div",{className:"w-full h-[200px] bg-green-500 max-w-[800px] mx-auto",children:(0,r.jsx)("svg",{ref:s,className:"rounded-[5px] border-[2px] border-black",children:(0,r.jsxs)("g",{className:"chart-margin",children:[(0,r.jsx)("g",{className:"x-axis"}),(0,r.jsx)("g",{className:"y-axis"}),(0,r.jsx)("g",{className:"x-label",children:(0,r.jsx)("text",{})}),(0,r.jsx)("g",{className:"y-label",children:(0,r.jsx)("text",{})}),(0,r.jsx)("g",{className:"chart-area"})]})})})};t.default=s}}]);