"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{7542:function(t,e,a){a.r(e);var r=a(2322),n=a(2784),l=a(6529);let s=()=>{let t=n.useRef(null),[e,a]=n.useState(),[s,c]=n.useState(!0),[i,o]=n.useState(!0),h=n.useCallback(()=>{l.gyn("data/sample.csv").then(t=>{let e=t.slice(0,t.length);if(e){let r=l.QP8().id(t=>t.id).parentId(t=>t.parentId),n=r(e);n.descendants().forEach((t,e)=>{t._children=t.children,t.depth>0&&(t.children=void 0)}),a(n)}}).catch(t=>{console.log(t)})},[]);n.useEffect(()=>{h()},[h]);let d=t=>{0!==t.height&&(t.children=t.children?void 0:t._children,o(!0))};return n.useEffect(()=>{if(e){var a,r;console.log(e);let n=l.Ys(t.current),s=Number(null===(a=t.current.parentElement)||void 0===a?void 0:a.clientWidth),c=Number(null===(r=t.current.parentElement)||void 0===r?void 0:r.clientHeight);n.attr("width",s),n.attr("height",c);let i={TOP:10,RIGHT:10,BOTTOM:10,LEFT:10},h=s-i.LEFT-i.RIGHT,p=c-i.TOP-i.BOTTOM;n.select(".chart-margin").attr("width",h).attr("height",p).attr("transform","translate(".concat(i.LEFT,", ").concat(i.TOP,")"));let x=.25*p,g=.1*x,u=l.G_s().size([2*Math.PI,x]).separation((t,e)=>(t.parent==e.parent?1:2)/t.depth).nodeSize([2*Math.PI/e.children.length,.15*h]),f=l.eRy().duration(500).tween("resize",()=>()=>n.dispatch("toggle")),y=n.select(".chart-area").attr("transform","translate(".concat(.5*h,",").concat(.5*p,")"));u(e).links();let m=(t,e)=>[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)],k=y.select(".node-layer"),v=k.selectAll("g").data(e.descendants()),N=v.enter().append("g").attr("fill-opacity",0).attr("stroke-opacity",0).attr("cursor","pointer").attr("pointer-events","all").on("click",(t,e)=>{d(e)});N.append("rect").attr("width",g).attr("height",g).attr("fill","#fff"),N.append("text").attr("fill","#F00").attr("stroke","#555").attr("font-size","10").style("transform",t=>"rotate(".concat(t.x<=Math.PI/8?180:0,"deg)")).text(t=>t.id),v.merge(v).transition(f).attr("transform",t=>"rotate(".concat(180*t.x/Math.PI-90,") translate(").concat(t.y-.5*g,", ").concat(-(.5*g),")")).attr("fill-opacity",1).attr("stroke-opacity",1),v.exit().transition(f).remove().attr("transform",t=>"rotate(".concat(180*t.x0/Math.PI-90,") translate(").concat(t.y0,", ").concat(-(.5*g),")")).attr("fill-opacity",0).attr("stroke-opacity",0);let j=y.select(".link-layer"),T=j.selectAll(".link").data(e.links());T.enter().append("line").transition(f).attr("class","link").attr("stroke","#ccc").attr("stroke-opacity",0),T.merge(T).transition(f).attr("stroke-opacity",1).attr("x1",t=>m(t.source.x,t.source.y)[0]).attr("y1",t=>m(t.source.x,t.source.y)[1]).attr("x2",t=>m(t.target.x,t.target.y)[0]).attr("y2",t=>m(t.target.x,t.target.y)[1]),T.exit().transition(f).remove().attr("stroke-opacity",0),e.eachBefore(t=>{t.parent&&(t.x0=t.parent.x,t.y0=t.parent.y)}),o(!1)}},[t,e,s,i]),(0,r.jsx)("div",{className:"w-full h-full bg-green-500 max-w-[800px] mx-auto",children:(0,r.jsx)("svg",{ref:t,children:(0,r.jsxs)("g",{className:"chart-margin",children:[(0,r.jsx)("g",{className:"x-axis"}),(0,r.jsx)("g",{className:"y-axis"}),(0,r.jsx)("g",{className:"x-label",children:(0,r.jsx)("text",{})}),(0,r.jsx)("g",{className:"y-label",children:(0,r.jsx)("text",{})}),(0,r.jsxs)("g",{className:"chart-area",children:[(0,r.jsx)("g",{className:"link-layer"}),(0,r.jsx)("g",{className:"node-layer"})]})]})})})};e.default=s}}]);