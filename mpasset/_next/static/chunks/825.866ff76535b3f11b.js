"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[825],{6128:function(e,t,a){var s=a(2322);a(2784);let r=e=>{let{children:t,open:a}=e;return(0,s.jsx)("div",{className:"absolute inset-0 \n      flex flex-col justify-center items-center transition-all duration-500\n      bg-transparent\n      ".concat(a?"visible opacity-100 z-50":"invisible opacity-0 -z-10","\n      "),children:t})};t.Z=r},8825:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var s,r,n,l,o=a(2322),c=a(2784),i=a(7725),d=a(1705),u=a(2382);let p="https://sheets.wevis.info";async function h(e,t){let{data:a}=await u.Z.get(`${p}/api/v1/db/public/shared-view/${e}/rows`,{params:t});return{...a.data,list:a.data.list.map(b)}}function b(e){return e.Images?{...e,Images:e.Images.map(({path:e,...t})=>e?{...t,url:`${p}/${e}`}:t)}:e}let m=(e,t)=>({fetch:a=>h(e,{...t,...a}),fetchAll:a=>f(e,{...t,...a})});async function f(e,t){let a=[],s=null;do{let r=await h(e,{...t,offset:s?s.page*s.pageSize:0,limit:200});a.push(...r.list),s=r.pageInfo}while(!s?.isLastPage);return a}(s=n||(n={})).Government="ร่วมรัฐบาล",s.Opposition="ฝ่ายค้าน";let S={Parties:m("40065196-c978-4d7a-b3fb-fb84694383a7"),People:m("572c5e5c-a3d8-440f-9a70-3c4c773543ec",{"nested[PeoplePartyHistory][fields]":"Party,EstablishedDate"}),VoteLog:m("e06d1465-2786-4799-9c0f-a20f4cf71ec4"),PeopleVotes:m("e58433cc-f4fd-499b-926d-05431412cbba"),Policies:m("4842fd3b-4f2c-45c7-b7e2-92f7e2e60ab2")};var N=a(7673),g=a(5237),y=a.n(g),x=a(2069),P=a(6128),C=a(8678);let v=e=>{let{title:t,content:a}=e;return(0,o.jsx)("div",{className:"w-[240px] h-[120px] px-[10px] py-[25px]\n      typo-b5 bg-cover bg-center bg-no-repeat bg-transparent",style:{backgroundImage:"url('".concat("/mpasset","/design_assets/step-frame.png')")},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"typo-b6 text-gray-3 mb-[5px]",children:a}),(0,o.jsx)("div",{className:"bg-highlight-2 rounded-[20px] px-[10px] py-[5px]",children:"".concat(t)})]})})},E=[{selector:".tour1-first-step",content:(0,o.jsx)(v,{title:"1. เลือกคนที่สนใจ",content:"นักการเมืองแต่ละคนเกี่ยวข้องกับธุรกิจอะไรบ้าง?"})},{selector:".tour1-second-step",content:(0,o.jsx)(v,{title:"2. คลิกดูธุรกิจต่างๆ",content:"นักการเมืองแต่ละคนเกี่ยวข้องกับธุรกิจอะไรบ้าง?"})},{selector:".tour2-first-step",content:(0,o.jsx)(v,{title:"1. เลือกหมวดธุรกิจ",content:"ธุรกิจที่เกี่ยวกับนักการเมืองแบบไหนรับเงินจากโครงการรัฐเยอะ?"})},{selector:".tour2-second-step",content:(0,o.jsx)(v,{title:"2. ดูตามลำดับ",content:"ธุรกิจที่เกี่ยวกับนักการเมืองแบบไหนรับเงินจากโครงการรัฐเยอะ?"})},{selector:".tour3-first-step",content:(0,o.jsx)(v,{title:"1. เลือกคนที่สนใจ",content:"บริษัทที่รับโครงการรัฐมีใครถือหุ้นบ้าง?"})},{selector:".tour3-second-step",content:(0,o.jsx)(v,{title:"2. เลือกบริษัทที่สนใจ",content:"บริษัทที่รับโครงการรัฐมีใครถือหุ้นบ้าง?"})},{selector:".tour3-third-step",content:(0,o.jsx)(v,{title:"3. ดูรูปหรืออ่านเพิ่มเติม",content:"บริษัทที่รับโครงการรัฐมีใครถือหุ้นบ้าง?"})}],j=e=>{let{children:t}=e;return(0,o.jsx)(C.C1,{steps:E,showBadge:!1,showNavigation:!1,showDots:!1,showCloseButton:!1,styles:{maskArea:e=>({...e,background:"#09090937"}),popover:e=>({...e,padding:0,background:"transparent",boxShadow:"unset"})},position:"center",children:t})},T=y()(()=>Promise.all([a.e(765),a.e(620),a.e(865)]).then(a.bind(a,6865)),{loadableGenerated:{webpack:()=>[6865]},loading:()=>(0,o.jsx)(d.a,{})}),I=y()(()=>Promise.all([a.e(765),a.e(199)]).then(a.bind(a,8199)),{loadableGenerated:{webpack:()=>[8199]},loading:()=>(0,o.jsx)(d.a,{})}),w=y()(()=>Promise.all([a.e(765),a.e(620),a.e(371)]).then(a.bind(a,8371)),{loadableGenerated:{webpack:()=>[8371]},loading:()=>(0,o.jsx)(d.a,{})});(r=l||(l={}))[r.MAIN_VIEW=0]="MAIN_VIEW",r[r.SELCTED_PERSON_CHART=1]="SELCTED_PERSON_CHART",r[r.SELECTED_COMPANY_CHART=2]="SELECTED_COMPANY_CHART";let D=()=>{c.useEffect(()=>{a.e(303).then(a.bind(a,6303))});let[e,t]=c.useState(!0),{person:s,setPerson:r,yourCandidatePerson:n,setYourCandidatePerson:u,selectedPerson:p,selectedCompany:h,party:b,setParty:m,setFilterPerson:f,selectedDataSet:g,selectedBusinessType:y,selectedParty:C,selectedSort:v}=(0,i.j)(),[E,D]=c.useState(l.MAIN_VIEW),_=c.useCallback(async()=>{let e=await S.Parties.fetchAll();m(e)},[m]),A=c.useCallback(async()=>{let e=await N.gyn("/mpasset/data/people-optim.csv",N.rA8);if(e){let t=e.slice(0,-1);console.log(t),await t.forEach(e=>{e.IsActive="True"===String(e.IsActive),e.IsMp="True"===String(e.IsMp),e.IsPmCandidate="True"===String(e.IsPmCandidate),e.IsCabinet="True"===String(e.IsCabinet),e.IsSenator="True"===String(e.IsSenator),e.companyType=JSON.parse(String(e.companyType).replace(/'/g,'"')),e.totalValueShare=e.totalValueShare||0,e.countCompShare=e.countCompShare||0,e.countDirector=e.countDirector||0,e.totalPctShare=e.totalPctShare||0});let a=t.map(e=>e.Name).indexOf("พิบูลย์ รัชกิจประการ");t[a].totalPctShare=30,r(t)}},[r]),M=c.useCallback(async()=>{let e=await N.gyn("/mpasset/data/yourcandidate/people-optim.csv",N.rA8);if(e){let t=e.slice(0,-1);await t.forEach(e=>{e.Number=Number(e.Number),e.IsMp=Boolean(e.IsMp),e.IsPmCandidate="True"===String(e.IsPmCandidate),e.IsCabinet=Boolean(e.IsCabinet),e.companyType=JSON.parse(String(e.companyType).replace(/'/g,'"')),e.MpType=e.MpType||"บัญชีรายชื่อ",e.Images="/mpasset/candidates/".concat(e.PartyName,"/").concat(e.Name.replaceAll(" ","-"),".webp"),e.totalValueShare=Number(e.totalValueShare)||0,e.countCompShare=Number(e.countCompShare)||0,e.countDirector=Number(e.countDirector)||0,e.totalPctShare=Number(e.totalPctShare)||0,e.totalPctShare=Number(e.totalPctShare)?Number(e.totalPctShare)>30?30:Number(e.totalPctShare):0}),u(t)}},[u]),O=c.useCallback(async()=>{await A(),await _(),await M(),t(!1)},[A,M,_,t]);return(c.useEffect(()=>{let e=!1;return s.length<=0&&b.length<=0&&n.length<=0?e||O():t(!1),()=>{e=!0}},[s,r,b,m,n,O]),c.useLayoutEffect(()=>{h?D(l.SELECTED_COMPANY_CHART):p?D(l.SELCTED_PERSON_CHART):D(l.MAIN_VIEW)},[p,h]),c.useMemo(async()=>{if(s.length>0&&n.length>0){let e="นักการเมือง 62"===g?s:n;y&&"all"!==y.code&&(e=e.filter(e=>e.companyType.includes(y.code))),C&&"สภาผู้แทนราษฎร"===C.Name?e=e.filter(e=>!0===e.IsMp):C&&"วุฒิสภา"===C.Name?e=e.filter(e=>!0===e.IsSenator):C&&"คณะรัฐมนตรี"===C.Name?e=e.filter(e=>!0===e.IsCabinet):C&&"ทุกพรรค"!==C.Name&&(e=e.filter(e=>e.PartyName===(null==C?void 0:C.Name))),e="desc"===v?e.sort((e,t)=>t.totalValueShare-e.totalValueShare):e.sort((e,t)=>e.totalValueShare-t.totalValueShare),f((0,x.n9)(e,"countCompShare","countDirector"))}},[y,C,v,f,s,n,g]),e)?(0,o.jsx)(d.a,{}):(0,o.jsx)("div",{className:"h-full inset-0 flex flex-col relative overflow-hidden",children:(0,o.jsxs)(j,{children:[(0,o.jsxs)("div",{className:"relative h-full",children:[(0,o.jsx)("div",{className:"w-full h-full",children:(0,o.jsx)(T,{})}),(0,o.jsx)(P.Z,{open:E===l.SELCTED_PERSON_CHART,children:(0,o.jsx)("div",{className:"w-full h-full bg-white bg-opacity-50",children:(0,o.jsx)(I,{})})}),(0,o.jsx)(P.Z,{open:E===l.SELECTED_COMPANY_CHART,children:(0,o.jsx)("div",{className:"w-full h-full bg-white bg-opacity-50",children:(0,o.jsx)(w,{})})}),(0,o.jsx)(P.Z,{open:e,children:(0,o.jsx)(d.a,{})})]}),(0,o.jsx)("div",{className:"z-[99999]",children:(0,o.jsx)("election-footer",{})})]})})};var _=D},2069:function(e,t,a){function s(e,t,a){return e.filter(e=>Number(e[t])>0).concat(e.filter(e=>0==Number(e[t])).sort((e,t)=>Number(t[a])-Number(e[a])))}function r(e){let t=Math.abs(Number(e))>=1e9?(Math.abs(Number(e))/1e9).toFixed(2)+"B":Math.abs(Number(e))>=1e6?(Math.abs(Number(e))/1e6).toFixed(2)+"M":Math.abs(Number(e))>=1e3?(Math.abs(Number(e))/1e3).toFixed(2)+"K":Math.abs(Number(e))+"฿";return e>0?t:"-".concat(t)}a.d(t,{B0:function(){return r},n9:function(){return s}})},7725:function(e,t,a){a.d(t,{j:function(){return r}});var s=a(624);let r=(0,s.Ue)((e,t)=>({person:[],setPerson:t=>e(e=>({...e,person:t})),personOutlier:[],setPersonOutlier:t=>e(e=>({...e,personOutlier:t})),yourCandidatePerson:[],setYourCandidatePerson:t=>e(e=>({...e,yourCandidatePerson:t})),filterPerson:[],setFilterPerson:t=>e(e=>({...e,filterPerson:t})),selectedPerson:void 0,setSelectedPerson:t=>e(e=>({...e,selectedPerson:t})),directorData:[],setDirectorData:t=>e(e=>({...e,directorData:t})),shareholderData:[],setShareholderData:t=>e(e=>({...e,shareholderData:t})),selectedCompany:void 0,setSelectedCompany:t=>e(e=>({...e,selectedCompany:t})),selectedDataSet:"ผู้สมัคร 66",setSelectedDataSet:t=>e(e=>({...e,selectedDataSet:t})),selectedBusinessType:void 0,setSelectedBusinessType:t=>e(e=>({...e,selectedBusinessType:t})),party:[],setParty:t=>e(e=>({...e,party:t})),selectedParty:void 0,setSelectedParty:t=>e(e=>({...e,selectedParty:t})),selectedSort:"desc",toggleSort:()=>e(e=>({...e,selectedSort:"asc"===e.selectedSort?"desc":"asc"})),openTutorial:!0,setOpenTutorial:t=>e(e=>({...e,openTutorial:t}))}))}}]);