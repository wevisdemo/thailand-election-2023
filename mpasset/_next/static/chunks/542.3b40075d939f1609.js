"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{7542:function(t,a,e){e.r(a);var r=e(2322),n=e(2784),s=e(5947),l=e(4640);let i=()=>{let{selectedPerson:t,directorData:a,shareholderData:e}=(0,l.j)(),i=n.useRef(null),[c,o]=n.useState(),[d,p]=n.useState(!0),[h,g]=n.useState(!0);n.useEffect(()=>{if(t&&a&&e){let r=[{id:"pol-".concat(t.Id),parentId:"",personData:t},...a.map(a=>({id:"".concat(a.tsic),parentId:"pol-".concat(t.Id),companyData:a})),...e.map(a=>({id:"".concat(a.tsic),parentId:"pol-".concat(t.Id),companyData:a}))],n=s.QP8().id(t=>t.id).parentId(t=>t.parentId),l=n(r);l.descendants().forEach((t,a)=>{t._children=t.children,t.depth>0&&(t.children=void 0)}),o(l)}},[t,a,e]);let x=t=>{0!==t.height&&(t.children=t.children?void 0:t._children,g(!0))};return n.useEffect(()=>{if(c){var t,a,e,r,n,l,o,d;console.log(c);let p=s.Ys(i.current),h=Number(null===(t=i.current.parentElement)||void 0===t?void 0:t.clientWidth),u=Number(null===(a=i.current.parentElement)||void 0===a?void 0:a.clientHeight);p.attr("width",h),p.attr("height",u);let y={TOP:10,RIGHT:10,BOTTOM:10,LEFT:10},f=h-y.LEFT-y.RIGHT,m=u-y.TOP-y.BOTTOM;p.select(".chart-margin").attr("width",f).attr("height",m).attr("transform","translate(".concat(y.LEFT,", ").concat(y.TOP,")"));let v=f>400?40:30,k=s.G_s().size([2*Math.PI,.45*f]).separation((t,a)=>(t.parent==a.parent?1:2)/t.depth),I=s.eRy().duration(500).tween("resize",()=>()=>p.dispatch("toggle")),_=p.select(".chart-area").attr("transform","translate(".concat(.5*f,",").concat(.5*m,")"));k(c).links();let j=(t,a)=>[(a=+a)*Math.cos(t-=Math.PI/2),a*Math.sin(t)],w=_.select(".node-layer"),N=w.selectAll("g").data(c.descendants()),P=N.enter().append("g").attr("fill-opacity",0).attr("stroke-opacity",0).attr("cursor","pointer").attr("pointer-events","all").on("click",(t,a)=>{x(a)});P.append("rect").attr("rx","5").attr("width",v).attr("height",v).attr("fill","#000").transition(I).attr("transform",t=>"rotate(".concat(180*t.x/Math.PI-90,") translate(").concat(t.y-.5*v,", ").concat(-(.5*v),")")).attr("fill-opacity",1).attr("stroke-opacity",1);let T=_.select(".link-layer"),b=T.selectAll(".link").data(c.links());b.enter().append("line").transition(I).attr("class","link").attr("stroke","#ccc").attr("stroke-opacity",1).attr("x1",t=>j(t.source.x,t.source.y)[0]).attr("y1",t=>j(t.source.x,t.source.y)[1]).attr("x2",t=>j(t.target.x,t.target.y)[0]).attr("y2",t=>j(t.target.x,t.target.y)[1]),_.selectAll("defs").remove();let E=_.select(".person-icon").append("svg:defs"),B=c.descendants()[0].data.personData;if(B){E.append("svg:pattern").attr("id","pattern_person_avatar"+B.Id).attr("width",1).attr("height",1).attr("patternContentUnits","objectBoundingBox").append("use").attr("xlink:href","#person_avatar"+B.Id).attr("transform","scale(0.01)"),E.append("svg:image").attr("id","person_avatar"+B.Id).attr("xlink:href","string"==typeof B.Images?B.Images:"/mpasset/design_assets/profile_pic.jpg").attr("width",100).attr("height",100).attr("x",0).attr("y",0),B.Party&&(E.append("svg:pattern").attr("id","pattern_party_avatar"+(null===(r=B.Party)||void 0===r?void 0:r.Id)).attr("width",1).attr("height",1).attr("patternContentUnits","objectBoundingBox").append("use").attr("xlink:href","#party_avatar"+(null===(n=B.Party)||void 0===n?void 0:n.Id)).attr("transform","scale(0.01)"),E.append("svg:image").attr("id","party_avatar"+(null===(l=B.Party)||void 0===l?void 0:l.Id)).attr("xlink:href","string"==typeof(null===(o=B.Party)||void 0===o?void 0:o.Images)?null===(d=B.Party)||void 0===d?void 0:d.Images:"/mpasset/design_assets/profile_pic.jpg").attr("width",100).attr("height",100).attr("x",0).attr("y",0));let M=_.select(".person-icon").attr("transform","translate(".concat(-50," ").concat(-50,")"));M.selectAll("rect").remove(),M.append("rect").attr("width",100).attr("height",100).attr("rx",49).attr("stroke","#000").attr("stroke-width","2").attr("fill","url(#pattern_person_avatar"+B.Id+")").attr("stroke","black"),M.append("rect").attr("x",70).attr("y",70).attr("width",30).attr("height",30).attr("rx",49).attr("stroke","#000").attr("stroke-width","2").attr("fill","url(#pattern_party_avatar"+(null===(e=B.Party)||void 0===e?void 0:e.Id)+")").attr("stroke","black")}c.eachBefore(t=>{t.parent&&(t.x0=t.parent.x,t.y0=t.parent.y)}),g(!1)}},[i,c,d,h]),(0,r.jsx)("div",{className:"w-full h-full max-w-[800px] mx-auto",children:(0,r.jsx)("svg",{ref:i,children:(0,r.jsxs)("g",{className:"chart-margin",children:[(0,r.jsx)("g",{className:"x-axis"}),(0,r.jsx)("g",{className:"y-axis"}),(0,r.jsx)("g",{className:"x-label",children:(0,r.jsx)("text",{})}),(0,r.jsx)("g",{className:"y-label",children:(0,r.jsx)("text",{})}),(0,r.jsxs)("g",{className:"chart-area",children:[(0,r.jsx)("g",{className:"link-layer"}),(0,r.jsx)("g",{className:"node-layer"}),(0,r.jsx)("g",{className:"person-icon"})]})]})})})};a.default=i}}]);